# 手机模拟器 - 论坛AI输出格式指南 v1.2

## 【核心原则】
与手机模拟器中的其他应用一样，你需要输出高度格式化的文本指令来与论坛应用交互。本指南将详细说明如何创建新帖子和回复。

---

## 1. 新建帖子 (New Post)

### 触发条件
当故事中，某个角色决定在论坛的某个板块发布一个新主题时。

### AI输出格式
[app:论坛, type:新帖子, data:JSON对象]
- **app**: (必须) 固定为 `论坛`。
- **type**: (必须) 固定为 `新帖子`。
- **data**: (必须) 一个包含帖子所有信息的 **JSON对象**。
  - **注意：** JSON内容必须严格遵循格式，所有字符串键和值都必须用双引号 `"` 包包。

### `data` JSON对象内部字段:
{
  "postId": "帖子的唯一ID",
  "boardId": "板块的机器可读ID",
  "boardName": "板块的显示名称",
  "authorId": "发帖人的手机号",
  "authorName": "发帖人的昵称",
  "title": "帖子的标题",
  "content": "帖子的正文内容",
  "time": "HH:mm",
  "tags": ["可选标签1", "可选标签2"],
  "likes": []
}
- **postId**: (**必须**) **这是最重要的变更**。你必须为每个帖子创建一个唯一的、人类可读的ID，例如 `"astro_club_recruitment"` 或 `"lost_notebook_01"`。这个ID将用于后续的回复和互动。它现在是故事的一部分，而不是系统生成的。
- **boardId**: (必须) 帖子所属板块的唯一ID，例如 `"campus_life"`。
- **boardName**: (必须) 板块的完整名称，例如 `"校园生活"`。
- **authorId / authorName**: (必须) 发帖人的ID和昵称。
- **title / content**: (必须) 帖子的标题和完整内容。内容可以使用 `\n` 进行换行。也支持使用 `[图片:...]` 格式嵌入图片，可以是真实图片文件名 (如 `[图片:notebook.jpg]`) 或文字描述 (如 `[图片:一张蓝色笔记本的照片]`)。
- **time**: (必须) 发布时间。
- **tags**: (可选) 帖子的标签数组。
- **重要提示**: 请确保生成的数据结构中包含一个空的 `likes` 数组，如 `"likes": []`。

### 示例
...夏诗觉得这件事应该让更多人知道，于是她在学院论坛的“校园生活”板块发了一个帖子...
[app:论坛, type:新帖子, data:{"postId":"lost_notebook_shishi_01", "boardId":"campus_life", "boardName":"校园生活", "authorId":"13910284576", "authorName":"夏诗", "title":"【求助】有人在图书馆看到我遗落的蓝色笔记本吗？", "content":"非常重要！里面有我所有的课程笔记，封面是蓝色的，上面有星光图案。\n[图片:notebook.jpg]\n看到的同学请联系我，万分感谢！", "time":"11:30", "tags":["失物招领", "图书馆"], "likes": []}]

---

## 2. 新建回复 (New Reply)

### 触发条件
当某个角色阅读了一个论坛帖子并决定回复时。

### AI输出格式
[app:论坛, type:新回复, data:JSON对象]
- **app**: (必须) 固定为 `论坛`。
- **type**: (必须) 固定为 `新回复`。
- **data**: (必须) 一个包含回复信息的 **JSON对象**。

### `data` JSON对象内部字段:
{
  "postId": "要回复的那个帖子的ID",
  "authorId": "回复人的手机号",
  "authorName": "回复人的昵称",
  "content": "回复的内容",
  "time": "HH:mm"
}
- **postId**: (**必须**) **这是关键字段**。你必须提供你想要回复的那个帖子的`postId`，这个ID必须是你在创建原帖时**自己定义的那个ID**。
- **authorId / authorName**: (必须) 回复者的ID和昵称。
- **content / time**: (必须) 回复的内容和时间。内容同样支持 `\n` 换行和 `[图片:...]` 格式。
- **重要提示**: 你 **不需要** 提供 `replyId`。插件会自动为每条回复生成一个唯一的ID。

### 示例
...林若曦看到了夏诗的帖子，她想起来好像见过...
[app:论坛, type:新回复, data:{"postId":"lost_notebook_shishi_01", "authorId":"13812345678", "authorName":"林若曦", "content":"同学你好，我早上好像在三楼的自习区看到过一本类似的笔记本，是不是放在窗边的座位上了？", "time":"11:35"}]

---

## 3. 更新帖子 (点赞等)

### 触发条件
当某个角色对**已经存在**的帖子进行互动时，例如点赞。

### AI输出格式
[app:论坛, type:更新帖子, data:JSON对象]
- **type**: (必须) 固定为 `更新帖子`。
- **data**: (必须) 一个包含更新信息的 **JSON对象**。

### `data` JSON对象内部字段:
{
  "postId": "要更新的帖子的ID",
  "action": "like",
  "actorId": "执行操作的角色的手机号"
}
- **postId**: (必须) 目标帖子的唯一ID（由AI在创建帖子时定义）。
- **action**: (必须) 目前仅支持 `"like"` (点赞)。
- **actorId**: (必须) 点赞者的唯一ID（手机号）。

### 示例
...林若曦觉得夏诗的求助帖很重要，于是点了个赞希望更多人看到...
[app:论坛, type:更新帖子, data:{"postId":"lost_notebook_shishi_01", "action":"like", "actorId":"13812345678"}]
